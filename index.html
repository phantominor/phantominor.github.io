<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phantom's Haven</title>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <div id="headerPage"></div> <!-- Placeholder for the header -->
    
    <div class="content">
        <div id="sidebarPage"></div> <!-- Placeholder for the sidebar -->
        <main>
            <section class="profile">
                <h1>Welcome to Phantom's Haven</h1>
                <p>This is a place where I share my novels, music, notes, and more.</p>
            </section>
            <section class="recent-updates">
                <h2>Recent Updates</h2>
                <ul>
                    <li><a href="#">Update 1</a></li>
                    <li><a href="#">Update 2</a></li>
                    <li><a href="#">Update 3</a></li>
                </ul>
            </section>
            <h2 id="section1">Section 1</h2>
            <p>Content...</p>
            <h3 id="subsection1">Subsection 1</h3>
            <p>Content...</p>
        </main>
    </div>
    
    <div id="footerPage"></div> <!-- Placeholder for the footer -->

    <script>
        // JavaScript to load the header
        function loadHeader() {
            fetch('templates/header.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('headerPage').innerHTML = data;
                })
                .catch(error => console.error('Error loading header:', error));
        }

        // JavaScript to load the footer
        function loadFooter() {
            fetch('templates/footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footerPage').innerHTML = data;
                })
                .catch(error => console.error('Error loading footer:', error));
        }

        // JavaScript to load the sidebar
        function loadSidebar() {
            fetch('templates/sidebar.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('sidebarPage').innerHTML = data;
                    generateSidebarMenu(); // Generate the sidebar menu after loading the sidebar
                    setupSidebarToggle();  // Set up the sidebar toggle after loading the sidebar
                })
                .catch(error => console.error('Error loading sidebar:', error));
        }

        // JavaScript to generate sidebar menu
        function generateSidebarMenu() {
            const sidebarMenu = document.getElementById('sidebar-menu');
            const headers = document.querySelectorAll('h2, h3'); // Select the headers you want in the TOC

            headers.forEach((header, index) => {
                // Skip the first h2 element (the "Contents" heading)
                if (index === 0 && header.tagName === 'H2') {
                    return;
                }

                const listItem = document.createElement('li');
                const anchor = document.createElement('a');
                anchor.href = `#${header.id}`;
                anchor.textContent = header.textContent;

                if (header.tagName === 'H3') {
                    listItem.style.paddingLeft = '20px'; // Indent H3 items
                }

                listItem.appendChild(anchor);
                sidebarMenu.appendChild(listItem);
            });
        }

        // JavaScript to set up the sidebar toggle
        function setupSidebarToggle() {
            document.querySelector('.sidebar-toggle').addEventListener('click', function() {
                document.querySelector('.sidebar-content').classList.toggle('active');
            });
        }

        // Load header, footer, and sidebar
        loadHeader();
        loadFooter();
        loadSidebar();
    </script>
</body>
</html>
